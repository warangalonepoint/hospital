<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Patient Portal – Dr. Charan Hospital</title>
  <link rel="manifest" href="manifest.webmanifest" /><link rel="icon" href="assets/logo.png" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="app-header compact">
    <a class="btn ghost" href="login.html">← Logout</a>
    <h1>Patient Portal</h1>
  </header>
  <main class="container narrow">
    <section class="card form">
      <div class="field"><label>Contact (10-digit)</label><input id="contact" inputmode="tel"/></div>
      <div class="field"><label>PIN</label><input id="ppin" placeholder="2222"/></div>
      <button class="btn primary" id="load">View My Records</button>
    </section>
    <section class="card" id="list" hidden>
      <h3>My Appointments & Notes</h3>
      <div class="table-wrap">
        <table class="table" id="ptbl"><thead><tr><th>Date</th><th>Time</th><th>Diagnosis</th></tr></thead><tbody></tbody></table>
      </div>
    </section>
  </main>
  <footer class="footer">Demo portal • read-only</footer>
  <script type="module">
    import { recordsForContact } from './js/store.js';
    const btn=document.getElementById('load');
    const list=document.getElementById('list');
    const tbody=document.querySelector('#ptbl tbody');
    btn.onclick=()=>{
      const c=document.getElementById('contact').value.trim();
      const p=document.getElementById('ppin').value.trim();
      if(p!=='2222'){ alert('Invalid PIN'); return; }
      const rows=recordsForContact(c);
      tbody.innerHTML='';
      for(const r of rows){ const tr=document.createElement('tr'); tr.innerHTML=`<td>${r.date}</td><td>${r.slot}</td><td>${r.dx}</td>`; tbody.appendChild(tr); }
      list.hidden=false;
    };
  </script>
</body></html>