<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dr. Charan Hospital – Demo</title>
  <link rel="manifest" href="/manifest.webmanifest" />
  <link rel="icon" href="/assets/logo.png" />
  <meta name="theme-color" content="#0f172a" />
  <link rel="stylesheet" href="/styles.css" />
  <meta name="description" content="Instant demo PWA for hospital bookings: patient booking, tokens, admin logs."/>
</head>
<body>
  <header class="app-header">
    <img src="/assets/logo.png" alt="Dr. Charan Hospital" class="logo"/>
    <div class="titles">
      <h1>Dr. Charan Hospital</h1>
      <p class="subtitle">Demo PWA – Appointments & Logs</p>
    </div>
  </header>

  <main class="container">
    <section class="card hero">
      <img src="/assets/banner.png" class="hero-img" alt="Hospital banner"/>
      <div class="hero-cta">
        <h2>Book. Track. Done.</h2>
        <p>Patient booking → Token → WhatsApp confirm → Admin logs.</p>
        <div class="grid2 gap">
          <a class="btn primary" href="/patient.html">Patient Booking</a>
          <a class="btn dark" href="/admin.html">Admin Dashboard</a>
        </div>
      </div>
    </section>

    <section class="card stats" id="stats"></section>

    <section class="card">
      <h3>How this demo works</h3>
      <ul class="bullets">
        <li>No server or keys. Uses <code>localStorage</code> so it runs anywhere (GitHub Pages, Vercel, Netlify).</li>
        <li>Token numbers reset per day. Slots auto-hide once booked.</li>
        <li>WhatsApp button opens a prefilled message to the patient.</li>
      </ul>
    </section>
  </main>

  <footer class="footer">Powered by <strong>Onestop AI</strong> • Demo only</footer>

  <script type="module">
    import { getToday, getBookingsByDate } from './js/store.js';

    const el = document.getElementById('stats');
    const today = getToday();
    const bookings = getBookingsByDate(today);

    el.innerHTML = `
      <h3>Today – ${today}</h3>
      <div class="grid3">
        <div class="stat"><div class="num">${bookings.length}</div><div class="lbl">Bookings</div></div>
        <div class="stat"><div class="num">${new Set(bookings.map(b=>b.slot)).size}</div><div class="lbl">Unique Slots</div></div>
        <div class="stat"><div class="num">${bookings.filter(b=>b.reminder==='✔️').length}</div><div class="lbl">Reminders Sent</div></div>
      </div>`;

    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/service-worker.js');
    }
  </script>
</body>
</html>
