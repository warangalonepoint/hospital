<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dashboard – Dr. Charan Hospital</title>
  <link rel="manifest" href="/manifest.webmanifest" />
  <link rel="icon" href="/assets/logo.png" />
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <header class="app-header compact">
    <a class="btn ghost" href="/index.html">Home</a>
    <h1 id="title">Dashboard</h1>
    <div>
      <span id="who" class="chip"></span>
      <button id="logout" class="btn ghost">Logout</button>
    </div>
  </header>

  <main class="container">
    <nav class="card" id="tabs">
      <div class="grid3 gap">
        <button class="btn" data-tab="pharma">Pharmacy</button>
        <button class="btn" data-tab="invoices">Invoices</button>
        <button class="btn" data-tab="analytics">Analytics</button>
      </div>
      <div class="grid3 gap" style="margin-top:10px">
        <button class="btn" data-tab="patients">Patients</button>
        <button class="btn" data-tab="staff">Staff HR</button>
        <button class="btn" data-tab="upload">Data Upload</button>
      </div>
    </nav>

    <section class="card" data-panel="pharma">
      <h3>Daily Pharma Sales</h3>
      <form class="form grid3 gap" id="saleForm">
        <div class="field"><label>Date</label><input type="date" name="date" /></div>
        <div class="field"><label>Item</label><input name="item" placeholder="Paracetamol 650"/></div>
        <div class="field"><label>Invoice #</label><input name="invoice" placeholder="INV-001"/></div>
        <div class="field"><label>Qty</label><input name="qty" type="number" min="1" value="1"/></div>
        <div class="field"><label>Price (₹)</label><input name="price" type="number" step="0.01"/></div>
        <div class="field"><label>&nbsp;</label><button class="btn primary" type="submit">Add</button></div>
      </form>
      <div class="flex-end"><button id="exportSales" class="btn dark">Export Sales CSV</button></div>
      <div class="table-wrap">
        <table class="table" id="salesTbl"><thead><tr><th>Date</th><th>Item</th><th>Qty</th><th>Price</th><th>Amount</th><th>Invoice</th></tr></thead><tbody></tbody></table>
      </div>
    </section>

    <section class="card" data-panel="invoices" hidden>
      <h3>Invoices</h3>
      <div id="invoiceList"></div>
    </section>

    <section class="card" data-panel="analytics" hidden>
      <h3>Pharma Analytics</h3>
      <div class="grid3">
        <div class="stat"><div class="num" id="totalToday">0</div><div class="lbl">Today ₹</div></div>
        <div class="stat"><div class="num" id="totalMonth">0</div><div class="lbl">This Month ₹</div></div>
        <div class="stat"><div class="num" id="topItem">–</div><div class="lbl">Top Item</div></div>
      </div>
      <canvas id="chart" height="160" style="margin-top:16px;width:100%"></canvas>
    </section>

    <section class="card" data-panel="patients" hidden>
      <h3>Patients Panel</h3>
      <form id="patForm" class="form grid3 gap">
        <div class="field"><label>Name</label><input name="name"/></div>
        <div class="field"><label>Contact</label><input name="contact" inputmode="tel" placeholder="10-digit"/></div>
        <div class="field"><label>Diagnosis</label><input name="dx" placeholder="e.g. Fever"/></div>
        <div class="field"><label>Date</label><input type="date" name="date"/></div>
        <div class="field"><label>Slot</label><input name="slot" placeholder="10:15 AM"/></div>
        <div class="field"><label>&nbsp;</label><button class="btn primary" type="submit">Add</button></div>
      </form>
      <div class="table-wrap">
        <table class="table" id="patTbl"><thead><tr><th>Date</th><th>Time</th><th>Name</th><th>Dx</th><th>WhatsApp</th><th>Reminder</th></tr></thead><tbody></tbody></table>
      </div>
    </section>

    <section class="card" data-panel="staff" hidden>
      <h3>Staff Roster</h3>
      <form id="staffForm" class="form grid3 gap">
        <div class="field"><label>Date</label><input type="date" name="date"/></div>
        <div class="field"><label>Staff</label><input name="name" placeholder="Nurse A"/></div>
        <div class="field"><label>Shift</label><select name="shift"><option>Morning</option><option>Evening</option><option>Night</option></select></div>
        <div class="field"><label>Status</label><select name="status"><option>Scheduled</option><option>Present</option><option>Absent</option></select></div>
        <div class="field"><label>&nbsp;</label><button class="btn primary" type="submit">Add</button></div>
      </form>
      <div class="table-wrap">
        <table class="table" id="staffTbl"><thead><tr><th>Date</th><th>Name</th><th>Shift</th><th>Status</th></tr></thead><tbody></tbody></table>
      </div>
    </section>

    <section class="card" data-panel="upload" hidden>
      <h3>Bulk Upload – 5 Years Pharma Data</h3>
      <p class="subtitle">Upload CSV with columns: <code>date,item,qty,price,invoice</code></p>
      <input type="file" id="csv" accept=".csv"/>
      <div class="grid2 gap" style="margin-top:10px">
        <button class="btn" id="downloadTemplate">Download Template</button>
        <button class="btn ghost" id="wipe">Wipe All Demo Data</button>
      </div>
    </section>
  </main>

  <footer class="footer">Role-based demo • Doctor has full access</footer>

  <script type="module" src="/js/app.js"></script>
</body>
</html>
