<!doctype html>
<html lang="en">
<head><
        link rel="stylesheet" href="styles.css?v=5">  <!-- bump for fresh CSS -->
<header class="banner">
  <div class="brand">
    <img src="assets/logo.png" alt="Dr. Charan Hospital logo">
    <div>
      <h1 class="title">Dr. Charan Hospital</h1>
      <p class="subtitle">Login</p>
    </div>
  </div>
</header>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Login – Dr. Charan Hospital</title>
  <link rel="manifest" href="manifest.webmanifest"/>
  <link rel="icon" href="assets/logo.png"/>
  <link rel="stylesheet" href="styles.css?v=4"/>
</head>
<body>
  <header class="banner">
    <div class="brand">
      <img src="assets/logo.png" alt="Logo">
      <h1>Dr. Charan Hospital – Login</h1>
    </div>
  </header>

  <main class="container">
    <section class="card">
      <div class="field">
        <label>Role</label>
        <select id="role">
          <option value="doctor">Doctor</option>
          <option value="supervisor">Supervisor</option>
          <option value="patient">Patient</option>
        </select>
      </div>
      <div class="field">
        <label>PIN</label>
        <input id="pin" inputmode="numeric" maxlength="6" placeholder="4-digit"/>
      </div>
      <button class="btn primary" id="loginBtn">Login</button>
      <p>Demo PINs → Doctor: <b>4321</b> • Supervisor: <b>1111</b> • Patient: <b>2222</b></p>
    </section>
  </main>

  <script>
    // Inline PIN logic (no external import)
    const USERS=[
      {role:'doctor',pin:'4321',name:'Dr. Rao'},
      {role:'supervisor',pin:'1111',name:'Supervisor'},
      {role:'patient',pin:'2222',name:'Patient'}
    ];
    const KEY='onestop_hospital_demo_v4';
    function saveUser(u){
      const db=JSON.parse(localStorage.getItem(KEY) || '{"bookings":[],"slots":{},"sales":[],"patients":[],"roster":[],"user":null}');
      db.user={role:u.role,name:u.name};
      localStorage.setItem(KEY, JSON.stringify(db));
    }
    document.getElementById('loginBtn').addEventListener('click',()=>{
      const role=document.getElementById('role').value;
      const pin=document.getElementById('pin').value.trim();
      const u=USERS.find(x=>x.role===role && x.pin===pin);
      if(!u){ alert('Invalid PIN for selected role'); return; }
      saveUser(u);
      location.href = role==='patient' ? 'portal.html?v=4' : 'dashboard.html?v=4';
    });
    if('serviceWorker' in navigator){ navigator.serviceWorker.register('service-worker.js'); }
  </script>
</body>
</html>
